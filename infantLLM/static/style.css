:root{ --muted:#9aa4b2; --bg:#f1f5f9; }
*{ box-sizing:border-box; }
body{
  margin:0; font-family:Inter,system-ui,Segoe UI,Roboto,sans-serif;
  background:#f1f5f9; color:#0f1724;
  transition: background 0.6s ease;
}

/* Ambient thinking gradient (light-friendly) */
@keyframes thinkingPulse { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
body.thinking{ background: linear-gradient(120deg,#f2f6fc,#eaf1fb,#f2f6fc); background-size:200% 200%; }
body.thinking.infant   { animation: thinkingPulse 6s ease-in-out infinite; }
body.thinking.child    { animation: thinkingPulse 8s ease-in-out infinite; }
body.thinking.teenager { animation: thinkingPulse 10s ease-in-out infinite; }
body.thinking.adult    { animation: thinkingPulse 12s ease-in-out infinite; }

header{ background:linear-gradient(90deg,#00416A 0%,#E4E5E6 100%); color:#fff; padding:20px; }
header .title{ display:flex; align-items:center; gap:12px; }
header img{ width:48px; height:48px; border-radius:12px; }
header h1{ margin:0; font-size:1.6rem; }
header p{ margin:2px 0 0 0; opacity:.9 }

.wrap{ display:flex; gap:16px; padding:16px; height:calc(100vh - 120px); }
.sidebar{ width:340px; background:#ffffff; border-radius:12px; padding:14px; box-shadow:0 10px 25px rgba(16,24,40,.07); overflow:auto; }
.content{ flex:1; display:flex; flex-direction:column; gap:12px; }
.card{ background:#ffffff; border-radius:12px; padding:14px; box-shadow:0 10px 25px rgba(16,24,40,.07); }

#chat-output{ border-radius:12px; padding:12px; border:2px solid #1e293b; background:#ffffff; transition: border-color .6s ease, box-shadow .6s ease, opacity .8s ease; overflow:auto; max-height:60vh; }
body.infant    #chat-output { border-color:#34d399; box-shadow:0 0 12px rgba(52,211,153,.25); }
body.child     #chat-output { border-color:#60a5fa; box-shadow:0 0 12px rgba(96,165,250,.25); }
body.teenager  #chat-output { border-color:#a78bfa; box-shadow:0 0 12px rgba(167,139,250,.25); }
body.adult     #chat-output { border-color:#fbbf24; box-shadow:0 0 12px rgba(251,191,36,.25); }

/* Thinking dim by stage */
body.thinking.infant   #chat-output { opacity:.7 }
body.thinking.child    #chat-output { opacity:.65 }
body.thinking.teenager #chat-output { opacity:.6 }
body.thinking.adult    #chat-output { opacity:.5 }

.msg{ max-width:72%; margin:8px 0; padding:10px 14px; border-radius:14px; line-height:1.35; box-shadow:0 6px 16px rgba(16,24,40,.06); }
.me{ margin-left:auto; background:#dcfce7; color:#14532d; }
.bot{ margin-right:auto; background:#e0f2fe; color:#0c4a6e; }
.hint{ margin-left:36px; font-size:13px; color:#64748b; }

.row{ display:flex; gap:8px; }
#user-input{ width:100%; padding:10px 14px; border-radius:10px; border:2px solid #334155; background:#ffffff; color:#0f1724; resize:none; outline:none; transition:border-color .6s ease, box-shadow .6s ease; min-height:48px; }
body.infant    #user-input { border-color:#34d399; box-shadow:0 0 8px rgba(52,211,153,.2); }
body.child     #user-input { border-color:#60a5fa; box-shadow:0 0 8px rgba(96,165,250,.2); }
body.teenager  #user-input { border-color:#a78bfa; box-shadow:0 0 8px rgba(167,139,250,.2); }
body.adult     #user-input { border-color:#fbbf24; box-shadow:0 0 8px rgba(251,191,36,.2); }

button{ padding:10px 14px; border:none; border-radius:10px; background:#4b6cb7; color:#fff; cursor:pointer; }
button:hover{ background:#182848; }

#typing-indicator{ font-size:.9em; color:#64748b; margin-top:8px; opacity:0; transition:opacity .6s ease-in-out; }
#typing-indicator.show{ opacity:1 }

#learning-flash{ position:fixed; inset:0; background: radial-gradient(circle, rgba(34,197,94,.35) 0%, rgba(34,197,94,0) 70%); opacity:0; pointer-events:none; transition:opacity .8s ease-out; z-index:999; }
#learning-flash.active{ opacity:1; transition:opacity .2s ease-in; }

.stage-text{ font-weight:600; font-size:1em; margin-top:8px; color:#596b86; text-shadow:0 0 4px rgba(0,0,0,.05); transition:color 1s ease, text-shadow 1s ease; }
body.thinking.infant   .stage-text { color:#34d399; text-shadow:0 0 8px rgba(52,211,153,.5); }
body.thinking.child    .stage-text { color:#60a5fa; text-shadow:0 0 8px rgba(96,165,250,.5); }
body.thinking.teenager .stage-text { color:#a78bfa; text-shadow:0 0 8px rgba(167,139,250,.5); }
body.thinking.adult    .stage-text { color:#fbbf24; text-shadow:0 0 8px rgba(251,191,36,.5); }

footer{ background:#182848; color:#e2e8f0; text-align:center; padding:10px 0; font-size:.9em; border-top:2px solid #00416A; box-shadow:0 -2px 8px rgba(0,0,0,.2); }

.instructions{background:#ffffff;border-radius:12px;padding:12px 14px;font-size:.9em;margin:12px 0 16px;color:#334155;line-height:1.4;border:1px solid #e2e8f0}
.instructions h3{color:#0f172a;font-size:1em;margin:0 0 6px 0}
.instructions code{background:#e2e8f0;padding:2px 6px;border-radius:6px;font-family:monospace;color:#14532d}
.growth-controls{display:flex;align-items:center;justify-content:space-between;gap:8px;margin:0 0 16px 0}
.growth-controls label{font-size:.85em;color:#475569}
.growth-controls select{padding:4px 6px;border-radius:8px;background:#ffffff;border:1px solid #cbd5e1;color:#0f172a;font-size:.9em}
.growth-controls select:disabled {
  background-color: #f1f5f9 !important;
  cursor: not-allowed !important;
  opacity: 0.6 !important;
}

.growth-controls select:not(:disabled) {
  background-color: #ffffff !important;
  cursor: pointer !important;
  opacity: 1 !important;
}

/* Smooth fill animation */
#growth-fill {
  transition: width 0.8s ease-in-out, background-color 0.6s ease-in-out, box-shadow 1s ease-in-out;
  border-radius: 999px;
}

/* Subtle glow pulse that matches stage color */
body.infant #growth-fill {
  box-shadow: 0 0 10px 2px rgba(52, 211, 153, 0.4);
  animation: pulseGreen 4s infinite ease-in-out;
}
body.child #growth-fill {
  box-shadow: 0 0 10px 2px rgba(96, 165, 250, 0.4);
  animation: pulseBlue 4s infinite ease-in-out;
}
body.teenager #growth-fill {
  box-shadow: 0 0 10px 2px rgba(167, 139, 250, 0.4);
  animation: pulsePurple 4s infinite ease-in-out;
}
body.adult #growth-fill {
  box-shadow: 0 0 10px 2px rgba(251, 191, 36, 0.4);
  animation: pulseGold 4s infinite ease-in-out;
}

/* Keyframes for glow pulses */
@keyframes pulseGreen {
  0%, 100% { box-shadow: 0 0 10px 2px rgba(52, 211, 153, 0.4); }
  50% { box-shadow: 0 0 25px 5px rgba(52, 211, 153, 0.7); }
}
@keyframes pulseBlue {
  0%, 100% { box-shadow: 0 0 10px 2px rgba(96, 165, 250, 0.4); }
  50% { box-shadow: 0 0 25px 5px rgba(96, 165, 250, 0.7); }
}
@keyframes pulsePurple {
  0%, 100% { box-shadow: 0 0 10px 2px rgba(167, 139, 250, 0.4); }
  50% { box-shadow: 0 0 25px 5px rgba(167, 139, 250, 0.7); }
}
@keyframes pulseGold {
  0%, 100% { box-shadow: 0 0 10px 2px rgba(251, 191, 36, 0.4); }
  50% { box-shadow: 0 0 25px 5px rgba(251, 191, 36, 0.7); }
}
